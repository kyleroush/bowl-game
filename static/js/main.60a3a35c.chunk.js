(this["webpackJsonpbowl-game"]=this["webpackJsonpbowl-game"]||[]).push([[0],{61:function(e,t,a){e.exports=a(81)},66:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),l=a.n(o),s=(a(66),a(27)),c=a(15),i=a(38),d=a(37),u=a(41),m=a(120),p=a(115),g=a(116),v=a(109),w=a(112),W=a(114),y=a(40),f=a.n(y);f.a.initializeApp({apiKey:"AIzaSyDYIdFDQ3ccmgUHsEJC7EQuPGyX3U0BKoM",authDomain:"reactemoji.firebaseapp.com",databaseURL:"https://reactemoji.firebaseio.com",projectId:"reactemoji",storageBucket:"reactemoji.appspot.com",messagingSenderId:"720480809303",appId:"1:720480809303:web:c82a2de9d2d14ab1a9ce12",measurementId:"G-C64FSH40V9"}),f.a.analytics();var E=f.a.firestore(),h=Object(v.a)((function(e){return{margin:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)}}}));var b=function(e){return r.a.createElement(w.a,null,""!==e.warning&&r.a.createElement(W.a,null,r.a.createElement(u.a,{color:"textSecondary"},e.warning)),r.a.createElement(W.a,null,r.a.createElement(m.a,{id:"session",label:"Session",variant:"outlined"})),r.a.createElement(p.a,null),r.a.createElement(W.a,null,r.a.createElement(g.a,{variant:"extended",color:"primary","aria-label":"create",className:h().margin,onClick:function(){var t,a=document.getElementById("session").value,n=parseInt(document.getElementById("words-per-person").value);""===a?(t=E.collection("BowlGame").doc(),a=t.id,t.set({players:{},gottenWords:[],wordsPerPerson:n}),e.setAppState({session:a,wordsPerPerson:n})):E.collection("BowlGame").doc(a).get().then((function(t){t.exists||(t=E.collection("BowlGame").doc(a),e.setAppState({session:a,wordsPerPerson:n}),t.set({players:{},gottenWords:[],wordsPerPerson:n}))}))}},"Create Bowl Game Session"),r.a.createElement(g.a,{variant:"extended",color:"primary","aria-label":"join",className:h().margin,onClick:function(){var t=document.getElementById("session").value;E.collection("BowlGame").doc(t).get().then((function(a){if(a.exists){var n=a.data.wordsPerPerson;e.setAppState({session:t,wordsPerPerson:n})}else e.setAppState({warning:"this session doesnt exist"})}))}},"Join Bowl Game Session")),r.a.createElement(W.a,null,r.a.createElement(m.a,{id:"words-per-person",label:"# of words",variant:"outlined",defaultValue:3,helperText:"number of words per person"})))},S=Object(v.a)((function(e){return{margin:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)}}}));var j=function(e){return r.a.createElement(w.a,null,r.a.createElement(W.a,null,r.a.createElement(m.a,{id:"name",label:"Name",variant:"outlined"}),r.a.createElement(g.a,{variant:"extended",color:"primary","aria-label":"join",className:S().margin,onClick:function(){var t=document.getElementById("name").value,a={};a["players.".concat(t)]={},E.collection("BowlGame").doc(e.session).update(a),e.setAppState({player:t})}},"Create player")))},B=a(16),x=a(117),k=a(118),C=a(119),G=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onAddWords=function(){var e=n.props,t=e.wordCount,a=e.player,r=e.session,o=Array(t).fill().map((function(e,t){return document.getElementById("word-".concat(t)).value})),l={};l["players.".concat(a)]={words:o},E.collection("BowlGame").doc(r).update(l),n.setState({words:o,addingWords:!1})},n.yourTurn=function(){var e=n.props.session,t=Object(B.a)(n),a=[],r=[];E.collection("BowlGame").doc(e).get().then((function(e){if(e.exists){for(var n in console.log("Document data:",e.data().players),r=r.concat(e.data().gottenWords),e.data().players){var o=e.data().players[n];a=a.concat(o.words),console.log("".concat(n,": ").concat(o.words))}a=a.filter((function(e){return!r.includes(e)}));var l=Math.floor(Math.random()*a.length),s=a[l];a.splice(l,1),t.setState({yourTurn:!0,aviableWords:a,currentWord:s,gottenWords:[],doc:e.data()})}else console.log("No such document!")}))},n.nextWord=function(){var e=n.state,t=e.currentWord,a=e.aviableWords,r=e.gottenWords,o=Math.floor(Math.random()*a.length);r.push(t),t=a[o],a.splice(o,1),n.setState({aviableWords:a,currentWord:t,gottenWords:r})},n.finalWord=function(){var e=n.state,t=e.gottenWords,a=e.doc,r=e.currentWord,o=n.props.session;t.push(r);var l=t.concat(a.gottenWords);E.collection("BowlGame").doc(o).update({gottenWords:l}),n.setState({yourTurn:!1,aviableWords:[],currentWord:null,gottenWords:[]})},n.finishTurn=function(){var e=n.state,t=e.gottenWords,a=e.doc,r=n.props.session,o=t.concat(a.gottenWords);E.collection("BowlGame").doc(r).update({gottenWords:o}),n.setState({yourTurn:!1,aviableWords:[],currentWord:null,gottenWords:[]})},n.renderDuringTurn=function(){var e=n.state,t=e.currentWord,a=e.aviableWords;return r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement(k.a,null,r.a.createElement(u.a,{color:"textPrimary"},"your word is"),r.a.createElement(u.a,{color:"textSecondary"},t))),0!==a.length?r.a.createElement(g.a,{variant:"extended",color:"primary","aria-label":"join",onClick:n.nextWord},"Gotten Word"):r.a.createElement(g.a,{variant:"extended",color:"primary","aria-label":"join",onClick:n.finalWord},"Gotten Final Word"),r.a.createElement(g.a,{variant:"extended",color:"primary","aria-label":"join",onClick:n.finishTurn},"End Turn"))},n.resetSession=function(){var e=n.props.session,t=n.state.doc,a={};for(var r in t.players)a[r]={};E.collection("BowlGame").doc(e).update({gottenWords:[],players:a}),n.setState({addingWords:!0,words:null,yourTurn:!1,aviableWords:[],currentWord:null,gottenWords:[]})},n.reuseWords=function(){var e=n.props.session;E.collection("BowlGame").doc(e).update({gottenWords:[]}),n.setState({addingWords:!1,words:null,yourTurn:!1,aviableWords:[],currentWord:null,gottenWords:[]})},n.renderResets=function(){return r.a.createElement("div",null,r.a.createElement(p.a,null),r.a.createElement(g.a,{variant:"extended",color:"secondary","aria-label":"join",onClick:n.reuseWords},"Put words back in bowl"),r.a.createElement(g.a,{variant:"extended",color:"secondary","aria-label":"join",onClick:n.resetSession},"End Game and start new?"))},n.state={addingWords:!0,words:null,yourTurn:!1,aviableWords:[],currentWord:null,gottenWords:[]},n}return Object(c.a)(a,[{key:"renderAddWords",value:function(){var e=this.props.wordCount;return r.a.createElement("div",null,r.a.createElement(u.a,null,"Add words to the bowl"),r.a.createElement(w.a,{component:"nav","aria-label":"contacts"},Array(e).fill().map((function(e,t){return r.a.createElement(W.a,{key:"word-".concat(t)},r.a.createElement(m.a,{id:"word-".concat(t),label:"".concat(t+1," word"),variant:"outlined"}))})),r.a.createElement(W.a,{button:!0,onClick:this.onAddWords},r.a.createElement(C.a,{inset:!0,primary:"Add Words"}))))}},{key:"renderStartTurn",value:function(){return r.a.createElement("div",null,r.a.createElement(g.a,{variant:"extended",color:"primary","aria-label":"join",onClick:this.yourTurn},"Start Turn"))}},{key:"render",value:function(){var e=this.props,t=e.session,a=e.player,n=this.state,o=n.addingWords,l=n.yourTurn;return r.a.createElement("div",null,r.a.createElement("h1",null,"Hello, ",a,"! You have joined ",t,"."),o&&this.renderAddWords(),!o&&(l?this.renderDuringTurn():this.renderStartTurn()),!o&&!l&&this.renderResets())}}]),a}(r.a.Component),T=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).setValue=function(e){n.setState(e)},n.state={session:null,player:null,warning:""},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.session,a=e.player,n=e.warning,o=e.wordsPerPerson;return r.a.createElement("div",null,r.a.createElement("h1",null,"The Bowl Game"),null==t&&r.a.createElement(b,{setAppState:this.setValue}),null!=t&&null==a&&r.a.createElement(j,{session:t,setAppState:this.setValue,warning:n}),null!=t&&null!=a&&r.a.createElement(G,{session:t,player:a,wordCount:o}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[61,1,2]]]);
//# sourceMappingURL=main.60a3a35c.chunk.js.map